# Cisco Router Configuration - Edge Router
# Device: Edge-Router-1
# Model: Cisco ASR 1001-X
# Purpose: Internet Edge Router

! Basic system configuration
hostname Edge-Router-1
service password-encryption
service timestamps debug datetime msec localtime
service timestamps log datetime msec localtime
no ip domain-lookup
ip domain-name example.edu

! Set up user authentication
enable secret $1$FaD0$Kz5PnpJxcC5zMxRlFNO7c1
username admin privilege 15 secret $1$FaD0$Kz5PnpJxcC5zMxRlFNO7c1

! Configure SSH access
crypto key generate rsa modulus 2048
ip ssh version 2
ip ssh authentication-retries 3
ip ssh time-out 60

! Interface to ISP
interface GigabitEthernet0/0/0
 description Connection to ISP
 ip address 203.0.113.2 255.255.255.252
 no ip redirects
 no ip unreachables
 no ip proxy-arp
 duplex full
 speed 1000
 no shutdown

! Interface to Firewall
interface GigabitEthernet0/0/1
 description Connection to Firewall
 ip address 10.0.0.1 255.255.255.252
 no ip redirects
 no ip unreachables
 no ip proxy-arp
 duplex full
 speed 1000
 no shutdown

! Configure routing
router bgp 65000
 bgp log-neighbor-changes
 neighbor 203.0.113.1 remote-as 64512
 neighbor 203.0.113.1 description ISP Connection
 !
 address-family ipv4
  network 203.0.113.0 mask 255.255.255.252
  neighbor 203.0.113.1 activate
 exit-address-family

! Static route to internal network
ip route 10.0.1.0 255.255.255.0 10.0.0.2

! Configure ACLs for basic security
ip access-list extended INBOUND_FILTER
 remark Block private IP ranges from Internet
 deny   ip 10.0.0.0 0.255.255.255 any
 deny   ip 172.16.0.0 0.15.255.255 any
 deny   ip 192.168.0.0 0.0.255.255 any
 remark Allow established connections
 permit tcp any any established
 remark Allow specific services
 permit tcp any any eq 80
 permit tcp any any eq 443
 permit tcp any any eq 25
 permit udp any any eq 53
 remark Default deny
 deny   ip any any log

! Apply ACL to Internet interface
interface GigabitEthernet0/0/0
 ip access-group INBOUND_FILTER in

! Configure NTP
ntp server 216.239.35.0
ntp server 216.239.35.4

! Configure logging
logging buffered 16384
logging console informational
logging monitor informational
logging trap informational
logging facility local6
logging host 10.0.1.5

! Configure SNMP
snmp-server community r0_0nly RO
snmp-server community wr1t3_@cc3ss RW
snmp-server location "Data Center, Rack 1"
snmp-server contact "Network Operations Center - noc@example.edu"
snmp-server enable traps

! Configure NetFlow
flow record FLOW-RECORD-1
 match ipv4 source address
 match ipv4 destination address
 match ipv4 protocol
 match transport source-port
 match transport destination-port
 collect counter bytes
 collect counter packets
 collect timestamp sys-uptime first
 collect timestamp sys-uptime last

flow exporter FLOW-EXPORTER-1
 destination 10.0.1.5
 source GigabitEthernet0/0/1
 transport udp 9996
 export-protocol netflow-v9

flow monitor FLOW-MONITOR-1
 record FLOW-RECORD-1
 exporter FLOW-EXPORTER-1
 cache timeout active 60

interface GigabitEthernet0/0/0
 ip flow monitor FLOW-MONITOR-1 input
 ip flow monitor FLOW-MONITOR-1 output

! Configure banner
banner motd ^
***************************************************************************
*                                                                         *
*                        AUTHORIZED ACCESS ONLY                           *
*                                                                         *
* This system is the property of Example University.                      *
* Unauthorized access is prohibited. All access and use may be monitored  *
* and recorded.                                                           *
*                                                                         *
***************************************************************************
^

! Save configuration
end
write memory
